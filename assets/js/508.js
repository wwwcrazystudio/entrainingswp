(self.webpackChunk=self.webpackChunk||[]).push([[508],{508:(t,e,s)=>{"use strict";s.d(e,{Z:()=>h});var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"player"},[s("div",{staticClass:"player__player-wrap"},["Full"==t.view?s("div",{staticClass:"player__info"},[s("div",{staticClass:"player__time player__time--current"},[t._v("\n        "+t._s(t.progress_minutes)+"\n      ")]),t._v(" "),s("div",{staticClass:"player__progress-bar"},[s("vue-slider",{ref:"progressbar",attrs:{value:t.progress,min:0,max:100,tooltip:"none",dotSize:16},on:{"drag-start":function(e){return t.player.pause()},dragging:function(e){return t.changeTimeDrag(e)},"drag-end":function(e){return t.player.play()}},nativeOn:{click:function(e){return t.changeTimeClick(e)}}})],1),t._v(" "),s("div",{staticClass:"player__time player__time--total"},[t._v("\n        "+t._s(t.duration_minutes)+"\n      ")])]):t._e(),t._v(" "),s("div",{staticClass:"player__foot"},[s("button",{staticClass:"player__ru-subs",class:t.translation?null:"player__ru-subs--disabled",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.showTranslationSubs(e)}}},[t._v("\n        RU\n      ")]),t._v(" "),"Full"==t.view?s("button",{staticClass:"player__speed",attrs:{type:"button"},on:{click:t.changeRate}},[t._v("\n        "+t._s(t.rate)+"Х\n      ")]):t._e(),t._v(" "),s("div",{staticClass:"player__controls"},["Full"==t.view?s("button",{staticClass:"player__control player__control--prev-chapter",attrs:{type:"button"}},[s("svg",{attrs:{width:"38",height:"26",viewBox:"0 0 38 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M18.5234 26V0L0 12.9794L18.5234 26ZM19.4766 12.9794L38 25.9588V0L19.4766 12.9794Z",fill:"#CCCCCC"}})])]):t._e(),t._v(" "),s("button",{staticClass:"player__control player__control--prev-sub",class:t.disabled?"player__control--disabled":null,attrs:{type:"button"},on:{click:t.prevSub}},[s("svg",{attrs:{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M0.465222 25.8441H3.50312C3.74944 25.8441 3.96838 25.4389 3.96838 25.0959V1.05996C3.96838 0.717033 3.74944 0.280582 3.50312 0.280582H0.437855C0.191539 0.280582 0.109434 0.717033 0.109434 1.05996V25.1583C0.136802 25.5012 0.191538 25.8441 0.465222 25.8441Z",fill:"#00BFA5",stroke:"#00BFA5","stroke-miterlimit":"10"}}),t._v(" "),s("path",{attrs:{d:"M5.33685 12.6882L25.179 24.4412V0.904068L5.33685 12.6882Z",fill:"#00BFA5"}}),t._v(" "),s("path",{attrs:{d:"M4.92631 13.4988C11.5495 17.4269 18.1453 21.3237 24.7684 25.2518C25.3158 25.5947 26 25.1894 26 24.4412C26 16.5851 26 8.76019 26 0.904078C26 0.155876 25.3158 -0.218224 24.7684 0.0935268C18.1453 4.02158 11.5495 7.94964 4.92631 11.8777C3.99579 12.4388 4.81684 14.06 5.74737 13.4988C12.3705 9.57074 18.9937 5.64268 25.5895 1.71463C25.1789 1.43405 24.7684 1.18465 24.3579 0.904078C24.3579 8.76019 24.3579 16.6163 24.3579 24.4412C24.7684 24.1918 25.1789 23.9113 25.5895 23.6307C18.9663 19.7026 12.3705 15.7746 5.74737 11.8465C4.81684 11.3165 3.99579 12.9377 4.92631 13.4988Z",fill:"#00BFA5"}})])]),t._v(" "),t.playing?s("button",{staticClass:"player__control player__control--pause",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.player.pause()}}},[s("svg",{attrs:{width:"30",height:"28",viewBox:"0 0 30 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M10.4022 1.33795H2.13525V26.5719H10.4022V1.33795Z",fill:"#00BFA5"}}),t._v(" "),s("path",{attrs:{d:"M3.69679 26.3016C3.69679 18.1005 3.69679 9.89948 3.69679 1.69844C3.23752 2.14904 2.77825 2.59965 2.31898 3.05026C5.07461 3.05026 7.83024 3.05026 10.6777 3.05026C10.2185 2.59965 9.75919 2.14904 9.29991 1.69844C9.29991 9.89948 9.29991 18.1005 9.29991 26.3016C9.75919 25.8509 10.2185 25.4003 10.6777 24.9497C7.9221 24.9497 5.16647 24.9497 2.31898 24.9497C0.573744 24.9497 0.573744 27.6534 2.31898 27.6534C5.07461 27.6534 7.83024 27.6534 10.6777 27.6534C11.4126 27.6534 12.0555 27.0225 12.0555 26.3016C12.0555 18.1005 12.0555 9.89948 12.0555 1.69844C12.0555 0.977468 11.4126 0.346619 10.6777 0.346619C7.9221 0.346619 5.16647 0.346619 2.31898 0.346619C1.58414 0.346619 0.941162 0.977468 0.941162 1.69844C0.941162 9.89948 0.941162 18.1005 0.941162 26.3016C0.941162 28.0139 3.69679 28.0139 3.69679 26.3016Z",fill:"#00BFA5"}}),t._v(" "),s("path",{attrs:{d:"M27.8545 1.33795H19.5876V26.5719H27.8545V1.33795Z",fill:"#00BFA5"}}),t._v(" "),s("path",{attrs:{d:"M21.241 26.3016C21.241 18.1005 21.241 9.89948 21.241 1.69844C20.7817 2.14904 20.3224 2.59965 19.8632 3.05026C22.6188 3.05026 25.3744 3.05026 28.2219 3.05026C27.7627 2.59965 27.3034 2.14904 26.8441 1.69844C26.8441 9.89948 26.8441 18.1005 26.8441 26.3016C27.3034 25.8509 27.7627 25.4003 28.2219 24.9497C25.4663 24.9497 22.7107 24.9497 19.8632 24.9497C18.1179 24.9497 18.1179 27.6534 19.8632 27.6534C22.6188 27.6534 25.3744 27.6534 28.2219 27.6534C28.9568 27.6534 29.5997 27.0225 29.5997 26.3016C29.5997 18.1005 29.5997 9.89948 29.5997 1.69844C29.5997 0.977468 28.9568 0.346619 28.2219 0.346619C25.4663 0.346619 22.7107 0.346619 19.8632 0.346619C19.1283 0.346619 18.4854 0.977468 18.4854 1.69844C18.4854 9.89948 18.4854 18.1005 18.4854 26.3016C18.4854 28.0139 21.241 28.0139 21.241 26.3016Z",fill:"#00BFA5"}})])]):s("button",{staticClass:"player__control player__control--play",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.player.play()}}},[s("svg",{attrs:{width:"27",height:"25",viewBox:"0 0 26 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M24.8066 13.7601L0.642944 1.17198V26.2962L24.8066 13.7601Z",fill:"#00BFA5"}}),t._v(" "),s("path",{attrs:{d:"M25.4276 13.0839C17.4076 8.87049 9.33575 4.70914 1.31569 0.495761C0.798262 0.235676 0.12561 0.547778 0.12561 1.17198C0.12561 9.54671 0.12561 17.9214 0.12561 26.2962C0.12561 26.9204 0.798262 27.2325 1.31569 26.9724C9.33575 22.811 17.4076 18.5977 25.4276 14.4363C26.3072 13.9682 25.5311 12.6157 24.6515 13.0839C16.6314 17.2972 8.55962 21.4586 0.53955 25.672C0.953489 25.88 1.31568 26.1401 1.72962 26.3482C1.72962 17.9735 1.72962 9.59873 1.72962 1.224C1.31568 1.43207 0.953489 1.69215 0.53955 1.90022C8.55962 6.11359 16.6314 10.275 24.6515 14.4883C25.5311 14.9045 26.3072 13.552 25.4276 13.0839Z",fill:"#00BFA5"}})])]),t._v(" "),s("button",{staticClass:"player__control player__control--next-sub",class:t.disabled?"player__control--disabled":null,attrs:{type:"button"},on:{click:t.nextSub}},[s("svg",{attrs:{width:"31",height:"26",viewBox:"0 0 31 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M30.4453 25.8441H26.8232C26.5295 25.8441 26.2684 25.4389 26.2684 25.0959V1.05996C26.2684 0.717033 26.5295 0.280582 26.8232 0.280582H30.4779C30.7716 0.280582 30.8695 0.717033 30.8695 1.05996V25.1583C30.8369 25.5012 30.7716 25.8441 30.4453 25.8441Z",fill:"#00BFA5",stroke:"#00BFA5","stroke-miterlimit":"10"}}),t._v(" "),s("path",{attrs:{d:"M24.6368 12.6882L0.978882 24.4412V0.904068L24.6368 12.6882Z",fill:"#00BFA5"}}),t._v(" "),s("path",{attrs:{d:"M25.1263 13.4988C17.2295 17.4269 9.36526 21.3237 1.46842 25.2518C0.815789 25.5947 0 25.1894 0 24.4412C0 16.5851 0 8.76019 0 0.904078C0 0.155876 0.815789 -0.218224 1.46842 0.0935268C9.36526 4.02158 17.2295 7.94964 25.1263 11.8777C26.2358 12.4388 25.2568 14.06 24.1474 13.4988C16.2505 9.57074 8.35368 5.64268 0.489474 1.71463C0.978947 1.43405 1.46842 1.18465 1.95789 0.904078C1.95789 8.76019 1.95789 16.6163 1.95789 24.4412C1.46842 24.1918 0.978947 23.9113 0.489474 23.6307C8.38632 19.7026 16.2505 15.7746 24.1474 11.8465C25.2568 11.3165 26.2358 12.9377 25.1263 13.4988Z",fill:"#00BFA5"}})])]),t._v(" "),"Full"==t.view?s("button",{staticClass:"player__control player__control--next-chapter",attrs:{type:"button"}},[s("svg",{attrs:{width:"38",height:"26",viewBox:"0 0 38 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M19.4766 26V0L38 12.9794L19.4766 26ZM18.5234 12.9794L0 25.9588V0L18.5234 12.9794Z",fill:"#00BFA5"}})])]):t._e()]),t._v(" "),"Full"==t.view?s("div",{staticClass:"player__repeat"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.repeat,expression:"repeat"}],staticClass:"player__repeat-control",attrs:{type:"checkbox",id:"repeat"},domProps:{checked:Array.isArray(t.repeat)?t._i(t.repeat,null)>-1:t.repeat},on:{change:function(e){var s=t.repeat,r=e.target,a=!!r.checked;if(Array.isArray(s)){var i=t._i(s,null);r.checked?i<0&&(t.repeat=s.concat([null])):i>-1&&(t.repeat=s.slice(0,i).concat(s.slice(i+1)))}else t.repeat=a}}}),t._v(" "),s("label",{staticClass:"player__repeat-label",attrs:{for:"repeat"}},[t._v("повтор")])]):t._e()])])])};r._withStripped=!0;var a=s(913),i=s(566),n=s(0),l=s.n(n);const o=a.default.extend({components:{VueSlider:l()},props:{data:{type:Object,required:!0},view:{type:String,default:"Full"},disabled:{type:Boolean,default:!1}},created:function(){this.chapter=this.data.chapter,this.player=new i.Howl({src:this.data.track}),this.en_subs=this.data.en,this.ru_subs=this.data.ru,"Puzzle"==this.view&&(this.repeat=!0)},mounted:function(){var t=parseInt(localStorage.getItem(window.location.href))/1e3;this.player.seek(t),this.current=this.player.seek()},beforeDestroy:function(){this.player.stop(),localStorage.setItem(window.location.href,this.current_segment[1])},data:function(){return{chapter:[],player:null,current:0,interval:!1,repeat:!1,translation:!0,rate:1,rateList:[.5,.75,1,1.25,1.5,1.75,2],en_subs:[],ru_subs:[]}},watch:{playing:function(t){var e=this;t?this.interval=setInterval((function(){e.current=e.player.seek()}),100):clearInterval(this.interval)},progress:function(){if(this.repeat){var t=this.current_segment[1],e=this.current_segment[2];this.progress_milliseconds>=e-300&&this.player.seek(t/1e3)}},subs_en_array:function(t){t&&("Puzzle"!=this.view||this.playing?"Full"==this.view&&this.$emit("enSubsChange",t):this.$emit("enSubsChange",t))},subs_ru_string:function(t){t&&("Puzzle"!=this.view||this.playing?"Full"==this.view&&this.$emit("ruSubsChange",t):this.$emit("ruSubsChange",t))}},methods:{changeTimeDrag:function(t){var e=this.duration/100*t;this.current=t,this.player.seek(e)},changeTimeClick:function(){var t=this.$refs.progressbar.getValue(),e=this.duration/100*t;this.current=t,this.player.seek(e)},changeRate:function(){var t=this,e=this.rateList.findIndex((function(e){return e==t.rate}));this.rate!=this.rateList[this.rateList.length-1]?this.rate=this.rateList[e+1]:this.rate=this.rateList[0],this.player.rate(this.rate)},prevSub:function(){var t=this.current_segment[0],e=(0!=t?this.en_subs[t-1]:this.en_subs[0]).startTime/1e3;this.player.seek(e),this.current=this.player.seek()},nextSub:function(){var t=this.current_segment[0],e=(t!=this.en_subs.length-1?this.en_subs[t+1]:this.en_subs[0]).startTime/1e3;this.player.seek(e),this.current=this.player.seek()},showTranslationSubs:function(){this.translation=!this.translation,this.$emit("translationChange",this.translation)}},computed:{current_time:function(){return this.player.seek()},duration:function(){return this.player?this.player.duration():0},duration_minutes:function(){var t=this.duration,e=Math.floor(t/60);return e+":"+Math.round(t-60*e)},progress:function(){return this.current/this.duration*100},progress_minutes:function(){var t=this.current,e=Math.floor(t/60),s=Math.round(t-60*e);return e+":"+(s<10?"0"+s:s)},progress_milliseconds:function(){return 1e3*this.current},current_segment:function(){var t=this,e=this.en_subs.findIndex((function(e){return t.progress_milliseconds<=e.endTime-100}));return[e,this.en_subs[e].startTime,this.en_subs[e].endTime]},playing:function(){return!!this.player&&this.player.playing()},subs_en_array:function(){var t,e=this;this.en_subs.length&&(t=this.en_subs.find((function(t){return e.progress_milliseconds<=t.endTime-1})).text.split(" "));return t},subs_ru_string:function(){var t,e=this;this.ru_subs.length&&(t=this.ru_subs.find((function(t){return e.progress_milliseconds<=t.endTime-1})).text);return t}}});var u=(0,s(900).Z)(o,r,[],!1,null,"5460bc67",null);u.options.__file="src/assets/components/Player.vue";const h=u.exports}}]);