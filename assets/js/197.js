(self.webpackChunk=self.webpackChunk||[]).push([[197],{857:(e,s,t)=>{e.exports=t.p+"assets/video/assets/finished.b41fbe.mp4"},974:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var i=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"puzzle-player"},[i("div",{staticClass:"puzzle-player__translation",style:{opacity:e.translation?1:0}},[e._v("\n    "+e._s(e.subs_ru)+"\n  ")]),e._v(" "),i("div",{staticClass:"puzzle-player__puzzle-wrap"},[i("div",{staticClass:"puzzle-player__result"},[e.result.length?e._l(e.result,(function(s){return i("span",{key:s},[e._v("\n          "+e._s(s)+"\n        ")])})):[i("svg",{attrs:{width:"37",height:"8",viewBox:"0 0 37 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M0.953125 3.67188C0.953125 2.59375 1.3125 1.71875 2.03125 1.04688C2.76562 0.375 3.67969 0.0390625 4.77344 0.0390625C5.88281 0.0390625 6.79688 0.375 7.51562 1.04688C8.25 1.71875 8.61719 2.59375 8.61719 3.67188C8.61719 4.73438 8.25781 5.60156 7.53906 6.27344C6.82031 6.92969 5.89844 7.25781 4.77344 7.25781C3.66406 7.25781 2.75 6.92969 2.03125 6.27344C1.3125 5.60156 0.953125 4.73438 0.953125 3.67188ZM14.9219 3.67188C14.9219 2.59375 15.2812 1.71875 16 1.04688C16.7344 0.375 17.6484 0.0390625 18.7422 0.0390625C19.8516 0.0390625 20.7656 0.375 21.4844 1.04688C22.2188 1.71875 22.5859 2.59375 22.5859 3.67188C22.5859 4.73438 22.2266 5.60156 21.5078 6.27344C20.7891 6.92969 19.8672 7.25781 18.7422 7.25781C17.6328 7.25781 16.7188 6.92969 16 6.27344C15.2812 5.60156 14.9219 4.73438 14.9219 3.67188ZM28.8906 3.67188C28.8906 2.59375 29.25 1.71875 29.9688 1.04688C30.7031 0.375 31.6172 0.0390625 32.7109 0.0390625C33.8203 0.0390625 34.7344 0.375 35.4531 1.04688C36.1875 1.71875 36.5547 2.59375 36.5547 3.67188C36.5547 4.73438 36.1953 5.60156 35.4766 6.27344C34.7578 6.92969 33.8359 7.25781 32.7109 7.25781C31.6016 7.25781 30.6875 6.92969 29.9688 6.27344C29.25 5.60156 28.8906 4.73438 28.8906 3.67188Z",fill:"black"}})])]],2),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.finished,expression:"!finished"}],staticClass:"puzzle-player__words"},e._l(e.puzzleWords,(function(s){return i("button",{key:s.text,ref:"word",refInFor:!0,staticClass:"puzzle-player__word",class:[s.error?"puzzle-player__word--error":null,s.helper?"puzzle-player__word--helper":null],on:{click:function(t){return e.checkWord(s)}}},[e._v("\n        "+e._s(s.text.replace(/[\[\]\|\?\,\!\.]+/g,""))+"\n      ")])})),0)]),e._v(" "),i("video",{directives:[{name:"show",rawName:"v-show",value:e.video,expression:"video"}],ref:"video",staticClass:"puzzle-player__finished",attrs:{src:t(857)},on:{ended:function(s){e.video=!1}}}),e._v(" "),i("Player",{staticClass:"puzzle-player__player",attrs:{disabled:!(!e.result.length||e.finished)||null,data:e.data,view:"Puzzle"},on:{ruSubsChange:function(s){e.subs_ru=s},enSubsChange:function(s){e.subs_en=s},translationChange:function(s){e.translation=s}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.finished,expression:"finished"}],staticClass:"puzzle-player__total"},[i("svg",{attrs:{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M14.0001 0.444458C6.55704 0.444458 0.443115 6.57779 0.443115 14.0445C0.443115 21.5111 6.55704 27.5556 14.0001 27.5556C21.4431 27.5556 27.557 21.4222 27.557 13.9556C27.557 6.4889 21.4431 0.444458 14.0001 0.444458ZM12.0507 20.3556L6.64565 14.9333L8.4178 13.1556L12.0507 16.8L20.8229 8.00001L22.595 9.77779L12.0507 20.3556Z",fill:"#44A621",stroke:"white","stroke-miterlimit":"10"}})]),e._v("\n\n    Собрано "+e._s(e.passed.puzzles.length)+" из "+e._s(e.data.en.length)+" пазлов\n  ")])],1)};i._withStripped=!0;var n=t(913),r=t(508),l=(t(427),t(598));const u=n.default.extend({props:{data:{type:Object,required:!0}},components:{Player:r.Z},mounted:function(){this.passed.chapterId=this.data.chapter.chapterId},data:function(){return{translation:!0,subs_ru:"",subs_en:"",shuffled_subs:"",result:[],attempts:0,passed:{chapterId:null,puzzles:[]},finished:!1,video:!1}},methods:{checkWord:function(e){var s=this,t=this.result,i=e.text;if(i==this.subs_en[t.length])this.result.push(i);else{var n=this.shuffled_subs.find((function(e){return e.text==i}));if(n.error=!0,this.attempts++,setTimeout((function(){n.error=!1}),350),this.attempts>=3)this.shuffled_subs.find((function(e){return e.text==s.subs_en[t.length]})).helper=!0}}},watch:{subs_en:function(){var e=l.shuffle(this.subs_en),s=this.subs_en.join(" ");this.shuffled_subs=e.map((function(e){return{text:e,error:!1,helper:!1}})),this.result=[],this.passed.puzzles.includes(s)?(this.finished=!0,this.result=this.subs_en):this.finished=!1},result:function(){this.shuffled_subs.find((function(e){return e.helper=!0})).helper=!1,this.attempts=0},puzzleWords:function(e){if(!e.length){this.finished||(this.video=!0),this.finished=!0,this.$refs.video.play();var s=this.result.join(" ");this.passed.puzzles.includes(s)||this.passed.puzzles.push(s)}}},computed:{puzzleWords:function(){var e=this,s=this.shuffled_subs,t=[];return s.length&&(t=s.filter((function(s){return!e.result.includes(s.text)}))),t}}});var a=(0,t(900).Z)(u,i,[],!1,null,"529f6046",null);a.options.__file="src/assets/components/chapter/Puzzle.vue";const h=a.exports}}]);